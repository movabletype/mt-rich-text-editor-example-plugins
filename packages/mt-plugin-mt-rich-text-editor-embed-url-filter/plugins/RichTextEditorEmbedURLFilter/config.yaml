name: MTRichTextEditorEmbedURLFilter
version: 1.0.0
author_link: http://www.movabletype.org/
author_name: Six Apart, Ltd.
description: <MT_TRANS phrase="A plugin to change the behavior of the editor when embedding URL">
l10n_lexicon:
  ja:
    A plugin to change the behavior of the editor when embedding URL: "URL埋め込み時のエディタの動作を変更するプラグイン"

callbacks:
  mt_rich_text_editor_embed_url: |
    sub {
        my ($cb, $params) = @_;

        # deny specific hosts
        if ($params->{url} =~ m{https://denied-host-1.example.com}) {
            return 0;
        }
        # another way to deny specific hosts
        elsif ($params->{url} =~ m{https://denied-host-2.example.com}) {
            $params->{url} = '';
        }

        # replace production URL with local staging environment URL for retrieving oEmbed data
        $params->{url} =~ s{https://production.example.com.jp}{http://localhost};

        1;
    }
